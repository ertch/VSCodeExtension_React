---
import Layout from "@/layouts/Layout.astro";
import Input from "../components/SimpleInput.astro";
import Campaign from "../components/CampaignSelect.astro";
import Field from "../components/SimpleFieldset.astro";
import Select from "../components/SimpleSelect.astro";
import SQL_Select from "../components/SQL_InsertSelect.astro";
import BasicCampaign from "../components/BasicCampaign.astro";
import Textfield from "../components/SimpleTextfield.astro";
import NavTabs from "../components/NavTabs.astro";
import FootButtons from "../components/FootButtons.astro";
---

<Layout title="Kampagne 001">
  <!-- TODO: Wofür diese Form ohne Inhalt? -->
  <form name="F1" onsubmit="return false"></form>
  <div class="black_overlay" id="lightbox"></div>
  <header>
    <img src="../include_skon_v2/images/150x62_skon_logo_white.png" />
    <img src="../include_skon_v2/images/freenet_logo.svg.png" />
    <h1>Freenet Prevention</h1>
  </header>

  <main>
    <aside class="left_block">
      <div id="customer_info"></div>
    </aside>
    <div id="middle_block">
      <!-- TODO: Wofür diese Form ohne Inhalt? -->
      <!-- <form name="F1" onsubmit="return false"></form> -->

      <NavTabs
        id="navigation"
        tabs={[
          "Vertrag 1",
          "Vertrag 2",
          "Vertrag 3",
          "Vertrag 4",
          "Vertrag 5",
          "Vertrag 6",
        ]}
      />
      <section class="datenerf-bg">
        <div class="tab_content activeTab" id="tab_start">
          <div id="tarifmatrix"></div>
          <div id="kundenhistorie" class="history">
            <fieldset><legend>Kundenhistorie</legend></fieldset>
          </div>
          <div id="begruessung_1" class="input_form oneColumn">
            <fieldset>
              <legend>Begrüßung Teil 1</legend>
              <div id="begruessungstext_1" class="helper_bp-35"></div>
            </fieldset>
          </div>
          <div id="abschliessen_complete" class="go">
            <button onclick="recording_complete_start();return false;">
              <strong class="glyph"></strong>
              &nbsp;Aufnahme
            </button>
            <br />
          </div>
          <div id="begruessung_2" class="input_form oneColumn helper_bp-35">
            <fieldset>
              <legend>Begr&uuml;&szlig;ung Teil 2</legend>
              <div id="begruessungstext_2" class="helper_bp-35"></div>
            </fieldset>
          </div>
        </div>
        <!--  Ende div id="tab_start" -->

        <section class="tab_content d-none" id="tab_vertrag_1">
          <!-- "Form aus Testzwecken deaktiviert" <form action="#" name="formular" method="POST" id="datenerfassung_form"> -->

          <span class="errormessage" id="datenerfassung_error_tarif_1"></span>

          <Campaign
            id="datenerfassung_produkt_1"
            title="VERTRAG 1"
            name="produkt_1"
            options={[
              "Nein, keine VVL",
              "VVL mit Tarifwechsel und mit Hardware",
              "VVL ohne Tarifwechsel und mit Hardware",
              "VVL mit Tarifwechsel",
              "VVL ohne Tarifwechsel",
            ]}
            call="showprodukt('datenerfassung_produkt_1')"
          />

          <div
            id="datenerfassung_tarife_tab_1"
            class="input_form oneColumn d-none"
          >
            <div id="datenerfassung_tarif_1" class="input_form vertrags-grid">
              <Field title="Rufnummer Vertrag 1" klasse="v-grid-col_1">
                <Input
                  id="datenerfassung_tarif_1_rufnummer"
                  label="Rufnummer Vertrag 1:"
                  type="text"
                  value=""
                  call="compareRufnummern();"
                />
              </Field>

              <Field
                title="Hardware zu Vertrag 1"
                id="datenerfassung_tarif_1_hardware"
                klasse="v-grid-col_1"
              >
                <Select
                  id="datenerfassung_handy_1"
                  label="Wünscht Kunde Hardware für Vertrag 1?"
                  name="datenerfassung_handy_1"
                  options={[
                    ["ja", "Ja"],
                    ["nein", "Nein"],
                  ]}
                />
                <SQL_Select
                  id="datenerfassung_handy_hersteller_1"
                  label="Hersteller:"
                  name="datenerfassung_handy_hersteller_1"
                  call="showHandyModellTarif1($('datenerfassung_handy_hersteller_1').value)"
                />
                <SQL_Select
                  id="datenerfassung_handy_modell_1"
                  label="Modell:"
                  name="datenerfassung_handy_modell_1"
                />
              </Field>

              <Field
                title="Vergebene Gutschrift Vertrag 1"
                klasse="v-grid-col_1"
              >
                <Input
                  id="datenerfassung_gutschrift_tarif_1"
                  label="Gutschrift Vertrag 1:"
                  type="text"
                  value=""
                  call="fillZusammenfassungTarif1bis6();"
                />
              </Field>

              <Field
                title="Freitext Vertrag 1"
                klasse="helper_bp-35 v-grid-col_1"
              >
                <Textfield
                  id="datenerfassung_freitext_tarif_1"
                  label="Freitext:"
                  row="6"
                  col="33"
                  value=""
                />
              </Field>

              <Field
                title="Zusatzprodukte Vertrag 1"
                id="zusatzprodukt_tarif_1"
                klasse="v-grid-col_1"
              >
                <Select
                  id="datenerfassung_zusatzprodukt_hsp_tarif_1"
                  label="HSP Vertrag 1:"
                  name="datenerfassung_zusatzprodukt_hsp_tarif_1"
                  call="showHSP();"
                  options={[
                    ["KV", "HSP nicht angesprochen"],
                    ["EP", "HSP gewünscht"],
                    ["EN", "HSP nicht gewünscht"],
                  ]}
                />

                <div id="hsp_tarif_1_div" class="d-none hsp_div">
                  <SQL_Select
                    id="datenerfassung_hsp_handyhersteller_1"
                    label="Hersteller:"
                    name="datenerfassung_hsp_handyhersteller_1"
                    call="showHandyModellHSP1($('datenerfassung_hsp_handyhersteller_1').value)"
                  />
                  <SQL_Select
                    id="datenerfassung_hsp_handymodell_1"
                    label="Modell:"
                    name="datenerfassung_hsp_handymodell_1"
                    call="showClassicPremiumHSP1()"
                  />
                  <Select
                    id="datenerfassung_hsp_typ_1"
                    label="HSP Variante Vertrag 1:"
                    name="datenerfassung_hsp_typ_1"
                    call="recordOn()"
                    options={[
                      [
                        "3457465",
                        "WERTGARANTIE Geräteschutz 100 CC (Smartphone)",
                      ],
                      [
                        "E3457495",
                        "WERTGARANTIE Geräteschutz 800 CC (Smartphone)",
                      ],
                      [
                        "3457475",
                        "WERTGARANTIE Geräteschutz 1.100 CC (Smartphone)",
                      ],
                      [
                        "3457487",
                        "WERTGARANTIE Geräteschutz 3.000 CC (Smartphone)",
                      ],
                      [
                        "3457528",
                        "WERTGARANTIE Geräteschutz Gebrauchtgeräte CC(Smartphone)",
                      ],
                    ]}
                  />
                  <Select
                    id="datenerfassung_hsp_diebstahlschutz_1"
                    label="Plus-Option Vertrag 1:"
                    name="datenerfassung_hsp_diebstahlschutz_1"
                    call="recordOn()"
                    options={[
                      ["ja", "Ja"],
                      ["nein", "Nein"],
                    ]}
                  />

                  <div id="datenerfassung_hsp_adresse_tarif_1" class="d-none">
                    <div class="placeholder"></div>
                    <fieldset id="datenerfassung_hsp_bankverbindung_1">
                      <legend>IBAN/BIC für HSP</legend>
                      <label for="datenerfassung_hsp_iban_1">IBAN:</label>
                      <span
                        class="errormessage"
                        id="datenerfassung_error_hsp_iban_1"></span><br />
                      <input
                        type="text"
                        name="datenerfassung_hsp_iban_1"
                        value=""
                        id="datenerfassung_hsp_iban_1"
                      /><br />
                      <label for="datenerfassung_hsp_bic_1">BIC:</label>
                      <span
                        class="errormessage"
                        id="datenerfassung_error_hsp_bic_1"></span><br />
                      <input
                        type="text"
                        name="datenerfassung_hsp_bic_1"
                        value=""
                        id="datenerfassung_hsp_bic_1"
                      />
                    </fieldset>
                    <fieldset>
                      <legend>Str. und Hausnr. für HSP</legend>
                      <label for="datenerfassung_strasse_1">Strasse:</label>
                      <span
                        class="errormessage"
                        id="datenerfassung_error_strasse_1"></span><br />
                      <input
                        type="text"
                        name="datenerfassung_strasse_1"
                        value=""
                        id="datenerfassung_strasse_1"
                      /><br />
                      <label for="datenerfassung_hausnummer_1"
                        >Hausnummer:</label
                      >
                      <span
                        class="errormessage"
                        id="datenerfassung_error_hausnummer_1"></span><br />
                      <input
                        type="text"
                        name="datenerfassung_hausnummer_1"
                        value=""
                        id="datenerfassung_hausnummer_1"
                      />
                    </fieldset>
                  </div>
                </div>

                <Select
                  id="datenerfassung_zusatzprodukt_norton_tarif_1"
                  label="Norton Vertrag 1:"
                  name="datenerfassung_zusatzprodukt_norton_tarif_1"
                  call="fillSMS();fillZusammenfassungTarif1bis6();"
                  options={[
                    ["KV", "Norton nicht angesprochen"],
                    ["EP", "Norton gewuenscht"],
                    ["EN", "Norton nicht gewuenscht"],
                  ]}
                />
              </Field>

              <Field
                title="SMS-Link Vertrag 1"
                id="smslink_tarif_1"
                klasse="v-grid-col_1"
              >
                <Select
                  id="datenerfassung_tarif_1_sms"
                  label="SMS-Link Vertrag 1"
                  name="datenerfassung_tarif_1_sms"
                  call="fillSMS();fillZusammenfassungTarif1bis6()"
                  options={[
                    ["ja", "Ja"],
                    ["nein", "Nein"],
                  ]}
                />
              </Field>

              <Field
                title="SMS Vertrag 1"
                id="sms_1"
                klasse="helper_bp-35 v-grid-col_1"
              >
                <div id="sms_vertrag_1"></div>
                <!-- generierter text -->
              </Field>

              <Field
                title="Zusammenfassung Vertrag 1"
                id="zusammenfassung_1"
                klasse="helper_bp-35 v-grid-col_1"
              >
                <div id="zusammenfassung_vertrag_1"></div>
                <!-- generierter Text -->
              </Field>

              <Field
                title="Weitere Verträge"
                id="produkt_anzahl_tarif_1"
                klasse="v-grid-col_1"
              >
                <Select
                  id="datenerfassung_produkt_anzahl_tarif_1"
                  label="Weiterer Vertrag gewünscht?"
                  name="datenerfassung_produkt_anzahl_tarif_1"
                  call="showVertraege('datenerfassung_produkt_anzahl_tarif_1')"
                  options={[
                    ["ja", "Ja"],
                    ["nein", "Nein"],
                  ]}
                />
              </Field>
            </div>

            <!-- Mittlerer Block, rechte Seite -->
          </div>

          <div class="d-none" id="datenerfassung_ablehnung">
            <Field title="Kein Vertragsabschluss">
              <SQL_Select
                id="datenerfassung_ablehnungsgrund"
                label="Ablehnungsgrund:"
                name="datenerfassung_ablehnungsgrund"
              />
            </Field>
          </div>

          <div>
            <div id="tab_next_zusammenfassung_1" class="left_right d-none">
              <button onclick="switchTab('tab_zusammenfassung');return false;">
                <strong class="glyph"></strong>
                &nbsp;Verabschiedung
              </button>
            </div>
            <div id="tab_next_tarif_1" class="left_right d-none">
              <button onclick="switchTab('tab_vertrag_2');return false;">
                <strong class="glyph"></strong>
                &nbsp;Zu Vertrag 2
              </button>
            </div>
          </div>

          <!-- </form> -->
        </section>

        <section class="tab_content d-none" id="tab_vertrag_2">
          <BasicCampaign Nr="2" />
        </section>

        <section class="tab_content d-none" id="tab_vertrag_3">
          <BasicCampaign Nr="3" />
        </section>

        <section class="tab_content d-none" id="tab_vertrag_4">
          <BasicCampaign Nr="4" />
        </section>

        <section class="tab_content d-none" id="tab_vertrag_5">
          <BasicCampaign Nr="5" />
        </section>

        <section class="tab_content d-none" id="tab_vertrag_6">
          <BasicCampaign Nr="6" />
        </section>

        <!-- Ende DIV-Vertrag 6 -->
        <div class="tab_content d-none" id="tab_zusammenfassung">
          <div id="zusammenfassung_errors"></div>
          <div id="optin" class="input_form oneColumn">
            <fieldset>
              <legend>Optin</legend>
              <label for="datenerfassung_optin">Optin:</label><span
                class="errormessage"
                id="datenerfassung_error_optin"></span><br />
              <select
                name="datenerfassung_optin"
                id="datenerfassung_optin"
                style="width:400px"
                onchange="recordOn()"
              >
                <option value="" selected="selected"> [Bitte auswählen]</option>
                <option value="ka">Optin nicht erteilt</option>
                <option value="voice">Optin erteilt</option>
              </select><br />
              <br />
            </fieldset>
          </div>
          <div
            id="zusammenfassung"
            class="input_form oneColumn"
            style="display: none"
          >
            <fieldset>
              <legend>Zusammenfassung</legend>
              <div id="zusammenfassung_text"></div>
            </fieldset>
          </div>
          <!--  <div id="verabschiedung" class="go"> -->
          <div id="verabschiedung" class="input_form oneColumn">
            <fieldset class="helper_bp-35">
              <legend>Verabschiedung</legend>
              <div id="verabschiedungstext_1"></div>
            </fieldset>
          </div>
          <div id="recording" class="input_form oneColumn">
            <fieldset>
              <legend>Aufnahme</legend>
              <br />&nbsp;<br />&nbsp;<br />&nbsp;<br />&nbsp;
              <button onclick="recordSummary('record_info');return false;">
                <strong class="glyph"></strong>
                &nbsp;Bitte die Aufnahme starten
              </button>
            </fieldset>
          </div>
          <div id="abschliessen" class="input_form oneColumn">
            <fieldset class="helper_bp-35">
              <legend>Abschluss</legend>
              <p class="errormessage record-info" id="record_info"></p>
              <button
                class="button200"
                onclick="ConfirmPositiv();return false;"
              >
                <strong class="glyph"></strong>
                &nbsp;Datensatz abschliessen
              </button>
              <br />
            </fieldset>
          </div>
          <div id="tab_next_2" class="left_right"></div>
        </div>
      </section>
      <FootButtons />
      <!-- Ende Div-Datenerfassung -->
    </div>
  </main>
  <!--  Ende div id="middle_block" -->

  <!-- "right_block wird in ttFrame 4 nicht mehr benötigt -->
  <!-- <div id="right_block"></div> -->

  <!-- Ende Div id="footer" -->
  <!--  Ende Div id="content" -->
  <div class="popup-container">
    <div id="negativ" class="popupdiv">
      <div class="header">
        <div class="title">Freedial</div>
        &nbsp;
        <a
          href="#"
          onclick="
          document.getElementById('lightbox').style.display='none';
          document.getElementById('negativ').style.display='none';
          "
        >
          <img
            src="../include_skon_v2/images/process-stop.gif"
            title="Fenster schließen"
          />
        </a>
      </div>
      <div class="content">
        <br />

        <p>Bitte hier die W�hloptionen eingeben:</p>
        <form action="#" method="POST" id="finish_negativ">
          <label>Rufnummer:</label><br />
          <input
            required="1"
            type="text"
            name="recall_number"
            value=""
            id="recall_number"
          />
          <br />
          <br />

          <div style="float: right">
            <input
              type="submit"
              value="OK"
              onclick="
                  blnSuccess=true;
                  errMsg='';
  
                  if(document.getElementById('recall_number').value=='') {
                    blnSuccess=false;
                    errMsg=errMsg+'Bitte Rufnummer eingeben!';
                  }
  
                  if(blnSuccess){
                    document.getElementById('lightbox').style.display='none';
                    document.getElementById('negativ').style.display='none';
                    makeRecall();
                    return false;
                  }
                  else  {
                    alert(errMsg);
                    return false;
                  }
                "
            />
          </div>
        </form>
      </div>
    </div>

    <script type="text/javascript">
      centerDiv("negativ", 350);
    </script>

    <div id="wiedervorlage" class="popupdiv">
      <div class="header">
        <div class="title">Wiedervorlage</div>
        &nbsp;
        <a
          href="#"
          onclick="
              document.getElementById('lightbox').style.display='none';
              document.getElementById('wiedervorlage').style.display='none';
              "
          ><img
            src="../include_skon_v2/images/process-stop.gif"
            title="Fenster schließen"
          />
        </a>
      </div>
      <div class="content">
        <p>Bitte geben Sie hier alle Parameter f�r die Wiedervolage an.</p>

        <div id="errors"></div>

        <form action="#" method="POST" id="finish_wiedervorlage">
          <label for="wiedervorlage_Date">Datum:</label>
          <input
            required="1"
            type="text"
            name="wiedervorlage[Date]"
            id="wiedervorlage_Date"
          />
          <input
            type="image"
            src="../include_skon_v2/images/calendar.png"
            id="wvDateTrigger"
            title="Kalender öffnen"
            alt="Kalender öffnen"
          /><br />
          <label for="wiedervorlage_Time">Uhrzeit:</label>
          <input
            required="1"
            type="text"
            name="wiedervorlage[Time]"
            value="15:00"
            id="wiedervorlage_Time"
          />
          <br />
          <label for="wiedervorlage_Text">Notiz:</label>
          <input
            required="1"
            type="text"
            name="wiedervorlage[Text]"
            id="wiedervorlage_Text"
          />
          <br />
          <div style="width: 330px; text-align: right;">
            <input
              type="submit"
              value="OK"
              onclick="
                  if((validateDate($('wiedervorlage_Date').value,'Datum',$('dummyText'),true,2008,2023)) &&
                  (validateProductionTime($('wiedervorlage_Time').value,'Zeit',$('dummyText'),true))) {
                  document.getElementById('lightbox').style.display='none';
                  document.getElementById('wiedervorlage').style.display='none';
                  finishCallback();
                  return false;
                  }
                  else {
                  alert($('dummyText').innerHTML);
                  return false;
                  }"
            />
          </div>
        </form>

        <br />
      </div>
    </div>

    <script type="text/javascript">
      centerDiv("wiedervorlage", 350);

      Calendar.setup({
        inputField: "wiedervorlage_Date",
        ifFormat: "%d.%m.%Y",
        button: "wvDateTrigger",
      });
    </script>

    <div id="apne" class="popupdiv">
      <div class="header">
        <div class="title">Ansprechpartner nicht erreicht</div>
        &nbsp;
        <a
          href="#"
          onclick="
              document.getElementById('lightbox').style.display='none';
              document.getElementById('apne').style.display='none';
              "
        >
          <img
            src="../include_skon_v2/images/process-stop.gif"
            title="Fenster schließen"
          />
        </a>
      </div>
      <div class="content">
        <br />
        <p>
          Bitte w�hlen Sie einen Zeitintervall, in dem der Kunde nochmals
          angerufen werden soll.:
        </p>
        <br />
        <form action="#" method="POST" id="finish_apne">
          <label>Recall:</label>
          <select id="apne_delay" name="apne_delay">
            <option value="" selected="selected">Bitte w&auml;hlen</option>
            <option value="0">Sofort</option>
            <option value="1">In einer Stunde</option>
            <option value="2">In zwei Stunden</option>
            <option value="3">In drei Stunden</option>
            <option value="4">In vier Stunden</option>
            <option value="5">In f�nf Stunden</option>
            <option value="6">In sechs Stunden</option>
            <option value="8">In acht Stunden</option>
            <option value="20">Morgen</option>
          </select><br />

          <label>Notiz:</label>
          <input type="text" name="apne_notiz" id="apne_notiz" />
          <input
            type="submit"
            value="OK"
            onclick="
                if(document.getElementById('apne_delay').value!='') {
                  document.getElementById('lightbox').style.display='none';
                  document.getElementById('apne').style.display='none';
                  finishApne();
                  // TODO: Warum return false? -->
                  return false;
                }
                else  {
                  alert('Bitte wählen Sie einen Zeitintervall!');
                  return false;
                }
                "
          />
          <br />
        </form>
      </div>
    </div>
  </div>
  <div id="dummyText" style="display: none"></div>
  <div id="div_sqldebug" style="display: none;"></div>
</Layout>
