---
interface Props {
  actions?: Array<Array<any>>;
  id: string;
  label: string;
  options?: Array<Array<any>>;
  firstOption?: Array<any>;
  klasse?: string;
  required?: boolean;
  hidden?:boolean;
  requiredValue?: Array<any>;
  disabled?: boolean;
  preset?: string;
  call?: string;
  submitTo?: string;
}

const {actions, id, label, firstOption, required, hidden, requiredValue, disabled, call, preset, submitTo, klasse } = Astro.props;
const { options } = Astro.props as Props;

let errorname = `${id}_errorMsg`;
let valueArr;
let hide = hidden ? ` d-none` : "";
let setClass = `${klasse}${hide}`;
let triggerArr = JSON.stringify(actions);
if (requiredValue != null) {
valueArr = JSON.stringify(requiredValue);
valueArr = valueArr.replace(/&quot;/g, '')
                   .replace(/"/g, '')
                   .replace(/,/g, '.');
}
---


<label for={id} class={hide}>{label}</label>
<span class="errormessage" id={errorname}></span>
<select
  class=`dropdown h-drop ${setClass}`
  id={id}
  name={id}
  {required}
  {disabled}
  onchange={call}
  data-required = {valueArr}
  data-trigger = {triggerArr}
  data-preset = {preset} 
  data-submit={submitTo}
>
  {
    firstOption ? (
      <option value={firstOption[0]} selected>
        {firstOption[1]}
      </option>
    ) : (
      <option disabled value="" selected>
        [Bitte ausw√§hlen]
      </option>
    )
  }

  {options.map((item) => <option value={item[0]}>{item[1]}</option>)}
</select>
